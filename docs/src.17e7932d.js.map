{"version":3,"sources":["node_modules/cantil/src/utils/utils.js","node_modules/cantil/src/utils/intersection-observer.js","node_modules/cantil/src/utils/swipeable.js","node_modules/cantil/src/cantil.js","src/index.js"],"names":["onDomReady","Promise","resolve","document","readyState","addEventListener","template","selector","query","content","cloneNode","once","callback","args","called","apply","observable","elements","init","queryAll","forEach","status","threshold","parseFloat","getAttribute","revealContentObserver","IntersectionObserver","entries","entry","isIntersecting","target","dispatchEvent","CustomEvent","unobserve","observe","getElements","swipeable","Number","startTouch","e","changedTouches","passive","dx","dy","clientX","clientY","adx","ady","map","Math","abs","detail","x","sign","y","Object","setPrototypeOf","NodeList","prototype","Array","HTMLCollection","querySelector","bind","querySelectorAll","window","Node","elem","from","flat","sibling","siblings","parentElement","children","filter","index","i","previousElementSibling","trigger","event","form","locale","navigator","language","currencyFormat","Intl","NumberFormat","style","currency","percentFormat","minimumFractionDigits","formClick","preventDefault","checkValidity","reportValidity","calculate","classList","remove","cost","value","weekdays","affectedDays","affectedCapacity","costEstimated","costPerPerson","innerText","format","then"],"mappings":"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","file":"src.17e7932d.js","sourceRoot":"..","sourcesContent":["// On Dom Ready\r\n// @stimulus https://github.com/stimulusjs/stimulus/blob/master/packages/%40stimulus/core/src/application.ts\r\nexport function onDomReady() {\r\n  return new Promise(resolve => (document.readyState === 'loading'\r\n    ? document.addEventListener('DOMContentLoaded', resolve)\r\n    : resolve()));\r\n}\r\n\r\n// Template helper\r\nexport function template(selector) {\r\n  return query(selector).content.cloneNode(true);\r\n}\r\n\r\n// Once\r\n// @vuejs https://github.com/vuejs/vue/blob/4de4649d9637262a9b007720b59f80ac72a5620c/src/shared/util.js\r\nexport function once(callback, ...args) {\r\n  let called = false;\r\n  \r\n  return function () {\r\n    if (!called) {\r\n      called = true;\r\n      callback.apply(this, args);\r\n    }\r\n  };\r\n}\r\n","// Interception observer\nexport const observable = {\n  elements: [],\n\n  // Init\n  init: selector => {\n    observable.elements = queryAll(selector || '[observable]');\n\n    observable.elements.forEach(observable => {\n      let status = false;\n      const threshold = parseFloat(observable.getAttribute('threshold') || 1);\n      const once = observable.getAttribute('once') !== null;\n\n      const revealContentObserver = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting && !status) {\n            status = true;\n            entry.target.dispatchEvent(new CustomEvent('observed', entry));\n            if (once) {\n              revealContentObserver.unobserve(entry.target);\n            }\n          } else if (!entry.isIntersecting && status) {\n            status = false;\n            entry.target.dispatchEvent(new CustomEvent('unobserved', entry));\n          }\n        });\n      }, { threshold });\n\n      revealContentObserver.observe(observable);\n    });\n  },\n\n  // Get Elements\n  getElements() {\n    return observable.elements;\n  }\n};","// Swipeable\nexport const swipeable = {\n  elements: [],\n\n  // Init\n  init: selector => {\n    swipeable.elements = queryAll(selector || '[swipeable]');\n\n    swipeable.elements.forEach(swipeable => {\n      const threshold = Number(swipeable.getAttribute('threshold')) || 120;\n      let startTouch;\n      \n      // Touch Start Event\n      swipeable.addEventListener('touchstart', e => {\n        [startTouch] = e.changedTouches;\n      }, { passive: true });\n      \n      // Touch End Event\n      swipeable.addEventListener('touchend', e => {\n        const [dx, dy] = [\n          e.changedTouches[0].clientX - startTouch.clientX,\n          e.changedTouches[0].clientY - startTouch.clientY,\n        ];\n      \n        const [adx, ady] = [dx, dy].map(Math.abs);\n      \n        if (adx || ady) {\n          swipeable.dispatchEvent(new CustomEvent('swipe', {\n            detail: {\n              x: adx > threshold && adx > ady ? -Math.sign(dx) : 0,\n              y: ady > threshold && ady > adx ? -Math.sign(dy) : 0,\n            },\n          }));\n        }\n      }, { passive: true });\n    });\n  },\n  \n  // Get Elements\n  getElements() {\n    return swipeable.elements;\n  }\n};","// Prototype\nObject.setPrototypeOf(NodeList.prototype, Array.prototype);\nObject.setPrototypeOf(HTMLCollection.prototype, Array.prototype);\n\n// Query\nconst query = document.querySelector.bind(document);\nconst queryAll = document.querySelectorAll.bind(document);\nwindow.query = query;\nwindow.queryAll = queryAll;\n\nNode.prototype.query = function query(selector) { return this.querySelector(selector); };\nNode.prototype.queryAll = function queryAll(selector) { return this.querySelectorAll(selector); };\nNodeList.prototype.query = function query(selector) { return this.queryAll(selector)[0]; };\nNodeList.prototype.queryAll = function queryAll(selector) { return this.map(elem => Array.from(elem.queryAll(selector))).flat(); };\n\n// Sibling util\nNode.prototype.sibling = function sibling(query) { return this.siblings(query)[0]; };\nNode.prototype.siblings = function siblings(query) {\n  const elems = query ? this.parentElement.queryAll(query) : this.parentElement.children;\n  return elems.filter(e => this !== e);\n};\n\n// Index util\nNode.prototype.index = function index() {\n  let elem = this;\n  let i = -1;\n  while (elem) { elem = elem.previousElementSibling; i += 1; }\n  return i;\n};\n\n// Trigger events\nNode.prototype.trigger = function trigger(event, init) {\n  this.dispatchEvent(new CustomEvent(event, init));\n};\n\nexport { query, queryAll }\nexport { onDomReady, once, template } from './utils/utils';\nexport { observable } from './utils/intersection-observer';\nexport { swipeable } from './utils/swipeable';","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport { query, onDomReady } from \"cantil\";\n\nconst form = query(\"form\");\nconst locale = navigator.language ?? 'pt-PT';\nconst currencyFormat = new Intl.NumberFormat(locale, { style: 'currency', currency: 'EUR' });\nconst percentFormat = new Intl.NumberFormat(locale, { style: 'percent', minimumFractionDigits: 2 });\n\nconst formClick = (event) => {\n  event.preventDefault();\n\n  // validate form\n  if (!form.checkValidity()) {\n    return form.reportValidity();\n  }\n\n  calculate();\n\n  // show results\n  query(\".alert\").classList.remove(\"d-none\");\n}\n\nconst calculate = () => {\n  // get form values\n  let cost = Number(form.query('#cost').value);\n  let volume = Number(form.query('#volume').value);\n  let weekdays = Number(form.query('#days').value);\n  let proporcion = Number(form.query('#proporcion').value) / 100;\n  let population = Number(form.query('#population').value);\n\n  let affectedDays = proporcion * weekdays;\n  let affectedCapacity = affectedDays / (weekdays === 5 ? 250 : 365);\n  let costEstimated = affectedCapacity * cost;\n  let costPerPerson = costEstimated / population;\n\n  query(\"[affected-days]\").innerText = percentFormat.format(affectedDays / 100);\n  query(\"[affected-capacity]\").innerText = percentFormat.format(affectedCapacity / 100);\n  query(\"[cost-estimated]\").innerText = currencyFormat.format(costEstimated);\n  query(\"[cost-per-person]\").innerText = currencyFormat.format(costPerPerson);\n}\n\nonDomReady().then(() => {\n  form.queryAll('input, select').forEach(e => e.addEventListener('input', calculate));\n  form.query(\"button\").addEventListener(\"click\", formClick);\n});"]}